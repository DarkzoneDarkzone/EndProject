<div class="row mt-4 mb-5">
    <div class="col">
        <div class="card cardButton card-order" data-toggle="modal" data-target="#orderFood">
            <div class="card-body card-body-style">
                <h1 class="card-title">สั่งอาหาร</h1>
            </div>
        </div>
    </div>
    <div class="col">
        <div class="card cardButton card-ordered" data-toggle="modal" data-target="#editOrder">
            <div class="card-body card-body-style">
                <h1 class="card-title">จัดการคำสั่งซื้อ</h1>
            </div>
        </div>
    </div>
</div>
<div class="row text-center">
    <div class="col text-center">
        <h3>รอการยืนยัน</h3>
    </div>
    <table class="table table-light">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Table</th>
                <th scope="col">Status</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let data of formOrderShow">
                <td>{{data.order_id}}</td>
                <td>{{data.cus_Name}}</td>
                <td>{{data.table_NO}}</td>
                <td>{{data.status}}</td>
                <td>
                    <div class=" material-icons" (click)="getOrderById(data.order_id)" data-toggle="modal" data-target="#modalShowDetail">description</div>
                </td>
            </tr>
        </tbody>
    </table>
</div>
<div class="row text-center">
    <div class="col text-center">
        <h3>รออาหาร</h3>
    </div>
    <table class="table table-light">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Table</th>
                <th scope="col">Status</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <tr *ngFor="let data of formOrderShow">
                    <td>{{data.order_id}}</td>
                    <td>{{data.cus_Name}}</td>
                    <td>{{data.table_NO}}</td>
                    <td>{{data.status}}</td>
                    <td>
                        <div class=" material-icons" (click)="getOrderById(data.order_id)" data-toggle="modal" data-target="#modalShowDetail">description</div>
                    </td>
                </tr>
        </tbody>
    </table>
</div>
<div class="row text-center">
    <div class="col text-center">
        <h3>รอการชำระ</h3>
    </div>
    <table class="table table-light">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Name</th>
                <th scope="col">Table</th>
                <th scope="col">Status</th>
                <th scope="col"></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <tr *ngFor="let data of formOrderShow">
                    <td>{{data.order_id}}</td>
                    <td>{{data.cus_Name}}</td>
                    <td>{{data.table_NO}}</td>
                    <td>{{data.status}}</td>
                    <td>
                        <div class=" material-icons" (click)="getOrderById(data.order_id)" data-toggle="modal" data-target="#modalShowDetail">description</div>
                    </td>
                </tr>
        </tbody>
    </table>
</div>

<!-- สั่งอาหาร -->
<div class="modal fade" id="orderFood" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-scrollable" style="height: 100%;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title mt-2">เลือกเมนูอาหาร</h2>
                <button type="button" #closebuttonOrder class="close" hidden="true" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="row row-cols-1 row-cols-md-4" *ngIf="showFood != null || undefined">
                    <div class="col col-image mb-4" *ngFor="let data of showFood">
                        <div class="card h-60">
                            <img [src]="showImages(data.imgPath)" class="card-img-top" alt="...">
                            <div class="card-body text-center">
                                <h3 class="card-title">{{data.name}}</h3>
                                <p class="card-text">ราคา: {{data.price}} บาท</p>
                                <p class="card-text">ประเภท: {{data.type}}</p>
                                <button type="button" class="btn btn-secondary">เพิ่มใส่ตระกร้า</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-dismiss="modal">ยกเลิก</button>
                <button type="button" class="btn btn-success" (click)="closeModalOrder()" data-toggle="modal" data-target="#orderFoodDetail">ถัดไป</button>
            </div>
        </div>
    </div>
</div>

<!-- รายละเอียดการสั่งอาหาร -->
<div class="modal fade" id="orderFoodDetail" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" #closebuttonBackOrder class="close" hidden="true" data-dismiss="modal">&times;</button>
                <h2 class="modal-title mt-2">กรอกรายละเอียด</h2>
            </div>
            <div class="modal-body mt-2">
                <form [formGroup]="formCreateOrder">
                    <div class="form-group">
                        <label>ชื่อลูกค้า</label>
                        <input type="text" class="form-control" formControlName="cus_Name" placeholder="(ถ้ามี)">
                    </div>
                    <div class="form-group">
                        <label>โต๊ะที่</label>
                        <input type="text" class="form-control" formControlName="table_NO" placeholder="หมายเลขโต๊ะ">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="submit" class="btn btn-primary" (click)="closeModalBackOrder()" data-toggle="modal" data-target="#orderFood">กลับ</button>
                <button type="submit" class="btn btn-success">ยืนยัน</button>
            </div>
        </div>
    </div>
</div>


<!-- จัดการคำสั่งซื้อ -->
<div class="modal fade" id="editOrder" aria-hidden="true">
    <div class="modal-dialog modal-xl" style="height: 100%;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title mt-2">จัดการคำสั่งซื้อ</h2>
                <button type="button" #closebuttonOrder class="close" hidden="true" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <table class="table table-light">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Name</th>
                            <th scope="col">Table</th>
                            <th scope="col">Status</th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row">1</th>
                            <td>Mark</td>
                            <td>1</td>
                            <td style="color: orange;">รอการยืนยัน</td>
                            <td>
                                <button type="button" class="btn btn-outline-success mt-0">ยืนยันคำสั่งซื้อ</button>
                            </td>
                            <td>
                                <div class=" material-icons">description</div>
                            </td>
                        </tr>
                        <tr>
                            <th scope="row">1</th>
                            <td>Mark</td>
                            <td>1</td>
                            <td style="color: red">รอการชำระ</td>
                            <td>
                                <button type="button" class="btn btn-outline-success md-2">ชำระเงิน</button>
                            </td>
                            <td>
                                <div class=" material-icons">description</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- โชว์ข้อมูลรายการ -->
<div class="modal fade" id="modalShowDetail" aria-hidden="true">
    <div class="modal-dialog modal-xl" style="height: 100%;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title mt-2">รายการอาหารที่สั่ง</h2>
                <button type="button" class="close" hidden="true" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <table class="table table-light">
                    <thead>
                        <tr>
                            <th scope="col">ID</th>
                            <th scope="col">Name</th>
                            <th scope="col">Type</th>
                            <th scope="col">Price</th>
                            <th scope="col"></th>
                            <th scope="col"></th>
                        </tr>
                    </thead>
                    <tbody *ngIf="formOrderShowById.value.foodList.length > 0">
                        <tr *ngFor="let data of formOrderShowById.value.foodList">
                            <td>{{data.food_id}}</td>
                            <td>{{data.name}}</td>
                            <td>{{data.type}}</td>
                            <td>{{data.price}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>